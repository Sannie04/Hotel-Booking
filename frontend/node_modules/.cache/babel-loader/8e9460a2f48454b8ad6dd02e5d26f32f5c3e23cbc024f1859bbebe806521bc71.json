{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Table,Button}from'react-bootstrap';import{useSelector,useDispatch}from'react-redux';import Loader from\"../components/Loader\";import Message from\"../components/Message\";import Paginate from'../components/Paginate';import moment from'moment';import{getAllBookings,deleteBooking}from'../redux/actions/BookingActions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminBookingsScreen=()=>{const dispatch=useDispatch();const[currentPage,setCurrentPage]=useState(1);const{loading,bookings,count,error}=useSelector(state=>state.bookingsFetch);const{loading:loadingDelete,success:successDelete,error:errorDelete}=useSelector(state=>state.bookingDelete);const handleDelete=id=>{dispatch(deleteBooking(id));};useEffect(()=>{dispatch(getAllBookings(currentPage));},[dispatch,currentPage,successDelete]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"mb-3\",children:\"Bookings\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:12,children:[loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Booking ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Room\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Check In \"}),/*#__PURE__*/_jsx(\"th\",{children:\"Check Out\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):bookings===null||bookings===void 0?void 0:bookings.map(booking=>{var _booking$user;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:booking._id}),/*#__PURE__*/_jsx(\"td\",{children:booking.room.name}),/*#__PURE__*/_jsx(\"td\",{children:moment(booking.checkInDate).format(\"LL\")}),/*#__PURE__*/_jsx(\"td\",{children:moment(booking.checkOutDate).format(\"LL\")}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",booking.amountPaid]}),/*#__PURE__*/_jsx(\"td\",{children:(_booking$user=booking.user)===null||_booking$user===void 0?void 0:_booking$user.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>handleDelete(booking._id),children:loadingDelete?/*#__PURE__*/_jsx(Loader,{}):\"Delete\"})})]},booking._id);})})]})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:12,children:count!==0&&/*#__PURE__*/_jsx(Paginate,{currentPage:currentPage,setCurrentPage:setCurrentPage,totalPosts:count,postPerPage:4})})})]});};export default AdminBookingsScreen;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Table","Button","useSelector","useDispatch","Loader","Message","Paginate","moment","getAllBookings","deleteBooking","jsx","_jsx","jsxs","_jsxs","AdminBookingsScreen","dispatch","currentPage","setCurrentPage","loading","bookings","count","error","state","bookingsFetch","loadingDelete","success","successDelete","errorDelete","bookingDelete","handleDelete","id","children","className","md","variant","striped","bordered","hover","size","map","booking","_booking$user","_id","room","name","checkInDate","format","checkOutDate","amountPaid","user","onClick","totalPosts","postPerPage"],"sources":["D:/NAM3/DACN/hotel-booking-main/frontend/src/screens/AdminBookingsScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Table, Button } from 'react-bootstrap';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport Paginate from '../components/Paginate';\nimport { IBooking } from '../interfaces/IBooking';\nimport moment from 'moment';\nimport { getAllBookings, deleteBooking } from '../redux/actions/BookingActions';\n\nconst AdminBookingsScreen = () => {\n  const dispatch = useDispatch();\n\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const { loading, bookings, count, error } = useSelector((state: RootStateOrAny) => state.bookingsFetch);\n  const { loading: loadingDelete, success: successDelete, error: errorDelete } = useSelector(\n    (state: RootStateOrAny) => state.bookingDelete\n  );\n\n  const handleDelete = (id: IBooking['_id']) => {\n    dispatch(deleteBooking(id));\n  };\n\n  useEffect(() => {\n    dispatch(getAllBookings(currentPage));\n  }, [dispatch, currentPage, successDelete]);\n\n  return (\n    <Container>\n      <Row>\n        <Col>\n          <h3 className='mb-3'>Bookings</h3>\n        </Col>\n      </Row>\n      <Row>\n        <Col md={12}>\n          {loadingDelete && <Loader />}\n          {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n          <Table striped bordered hover size=\"sm\">\n            <thead>\n              <tr>\n                <th>Booking ID</th>\n                <th>Room</th>\n                <th>Check In </th>\n                <th>Check Out</th>\n                <th>Amount</th>\n                <th>By</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {loading ? (\n                <Loader />\n              ) : error ? (\n                <Message variant=\"danger\">{error}</Message>\n              ) : (\n                bookings?.map((booking: any) => (\n                  <tr key={booking._id}>\n                    <td>{booking._id}</td>\n                    <td>{booking.room.name}</td>\n                    <td>{moment(booking.checkInDate as Date).format(\"LL\")}</td>\n                    <td>{moment(booking.checkOutDate as Date).format(\"LL\")}</td>\n                    <td>${booking.amountPaid}</td>\n                    <td>{booking.user?.name}</td>\n                    <td>\n                      <Button variant=\"danger\" onClick={() => handleDelete(booking._id)}>\n                        {loadingDelete ? <Loader /> : \"Delete\"}\n                      </Button>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </Table>\n        </Col>\n      </Row>\n      <Row>\n        <Col md={12}>\n          {count !== 0 && (\n            <Paginate\n              currentPage={currentPage}\n              setCurrentPage={setCurrentPage}\n              totalPosts={count}\n              postPerPage={4}\n            />\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default AdminBookingsScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}