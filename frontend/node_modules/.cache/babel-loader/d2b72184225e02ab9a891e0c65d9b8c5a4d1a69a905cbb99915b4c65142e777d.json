{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{useSelector,useDispatch}from'react-redux';import{Container,Row,Col,Form,Button}from'react-bootstrap';import{register}from'../redux/actions/UserActions';import Message from'../components/Message';import Loader from'../components/Loader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RegisterScreen=()=>{const dispatch=useDispatch();let navigate=useNavigate();const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[avatar,setAvatar]=useState(\"\");const{loading,success,error}=useSelector(state=>state.userRegister);const{userInfo}=useSelector(state=>state.userLogin);const handleSubmit=e=>{e.preventDefault();dispatch(register({name,email,password,avatar}));};const handleUpload=async e=>{var _target$files;const target=e.target;if(!((_target$files=target.files)!==null&&_target$files!==void 0&&_target$files.length)){return;}const file=target.files[0];const formData=new FormData();formData.append(\"image\",file);try{const config={headers:{\"Content-Type\":\"multipart/form-data\"}};const{data}=await axios.post(\"/api/uploads\",formData,config);setAvatar(data[0].path);}catch(error){console.log(error.message);}};useEffect(()=>{if(userInfo){navigate(\"/\");}},[dispatch,userInfo,success,navigate]);return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{className:\"justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{xs:12,md:6,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Full Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:name,placeholder:\"Full Name\",onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"E-Mail\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,placeholder:\"E-Mail\",onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:password,placeholder:\"Password\",onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"avatar\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Avatar\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",placeholder:\"Avatar\",name:\"image\",onChange:handleUpload})]}),/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:loading?/*#__PURE__*/_jsx(Loader,{}):`Register`})})]})]})})});};export default RegisterScreen;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","useSelector","useDispatch","Container","Row","Col","Form","Button","register","Message","Loader","jsx","_jsx","jsxs","_jsxs","RegisterScreen","dispatch","navigate","name","setName","email","setEmail","password","setPassword","avatar","setAvatar","loading","success","error","state","userRegister","userInfo","userLogin","handleSubmit","e","preventDefault","handleUpload","_target$files","target","files","length","file","formData","FormData","append","config","headers","data","post","path","console","log","message","children","className","xs","md","variant","onSubmit","Group","controlId","Label","Control","type","value","placeholder","onChange"],"sources":["D:/NAM3/DACN/hotel-booking-main/frontend/src/screens/RegisterScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport { Container, Row, Col, Form, Button } from 'react-bootstrap';\nimport { register } from '../redux/actions/UserActions';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { IUser } from '../interfaces/IUser';\n\nconst RegisterScreen: React.FC = () => {\n\n    const dispatch = useDispatch();\n    let navigate = useNavigate();\n\n    const [name, setName] = useState<IUser['name']>(\"\");\n    const [email, setEmail] = useState<IUser['email']>(\"\");\n    const [password, setPassword] = useState<IUser['password']>(\"\");\n    const [avatar, setAvatar] = useState<IUser['avatar']>(\"\");\n\n    const { loading, success, error } = useSelector((state: RootStateOrAny) => state.userRegister);\n    const { userInfo } = useSelector((state: RootStateOrAny) => state.userLogin);\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        dispatch(register({ name, email, password, avatar }));\n    }\n\n    const handleUpload = async (e: React.ChangeEvent) => {\n\n        const target = e.target as HTMLInputElement;\n\n        if (!target.files?.length) {\n            return;\n        }\n\n        const file = target.files[0];\n\n        const formData = new FormData();\n\n        formData.append(\"image\", file);\n\n        try {\n            \n            const config = {\n                headers: {\n                    \"Content-Type\": \"multipart/form-data\"\n                }\n            }\n\n            const { data } = await axios.post(\"/api/uploads\", formData, config);\n\n            setAvatar(data[0].path);\n\n        } catch (error: any) {\n            console.log(error.message);\n        }\n\n    }\n\n    useEffect(() => {\n        if(userInfo) {\n            navigate(\"/\");\n        }\n    }, [dispatch, userInfo, success,navigate]);\n    \n\n  return (\n      <Container>\n        <Row className='justify-content-center'>\n            <Col xs={12} md={6}>\n                <h2 className=\"mb-4\">Login</h2>\n                {error && <Message variant=\"danger\">{error}</Message>}\n                <Form onSubmit={handleSubmit}>\n                    <Form.Group controlId=\"name\" className=\"mb-3\">\n                        <Form.Label>Full Name</Form.Label>\n                        <Form.Control \n                            type=\"text\" \n                            value={name} \n                            placeholder=\"Full Name\" \n                            onChange={(e) => setName(e.target.value)}\n                        >\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group controlId=\"email\" className=\"mb-3\">\n                        <Form.Label>E-Mail</Form.Label>\n                        <Form.Control \n                            type=\"email\" \n                            value={email} \n                            placeholder=\"E-Mail\" \n                            onChange={(e) => setEmail(e.target.value)}\n                        >\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group controlId=\"password\" className=\"mb-3\">\n                        <Form.Label>Password</Form.Label>\n                        <Form.Control \n                            type=\"password\" \n                            value={password} \n                            placeholder=\"Password\" \n                            onChange={(e) => setPassword(e.target.value)}\n                        >\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group controlId=\"avatar\" className=\"mb-3\">\n                        <Form.Label>Avatar</Form.Label>\n                        <Form.Control \n                            type=\"file\" \n                            placeholder=\"Avatar\"\n                            name=\"image\"\n                            onChange={handleUpload}\n                        >\n                        </Form.Control>\n                    </Form.Group>\n                    <Form.Group>\n                        <Button variant=\"primary\" type=\"submit\">\n                            {loading ? <Loader /> : `Register`}\n                        </Button>\n                    </Form.Group>\n                </Form>\n            </Col>\n        </Row>\n    </Container>\n  );\n};\n\nexport default RegisterScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}