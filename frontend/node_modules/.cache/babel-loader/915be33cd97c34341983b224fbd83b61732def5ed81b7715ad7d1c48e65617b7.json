{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Row,Col,Table,Button,Image}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import Loader from'../components/Loader';import Paginate from'../components/Paginate';import{deleteUser,fetchUsers}from'../redux/actions/UserActions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminUsersScreen=()=>{const[currentPage,setCurrentPage]=useState(1);const dispatch=useDispatch();const{loading,users,count,error}=useSelector(state=>state.usersFetch);const{loading:loadingDelete,success:successDelete,error:errorDelete}=useSelector(state=>state.userDelete);useEffect(()=>{dispatch(fetchUsers(currentPage));},[dispatch,currentPage,successDelete]);const handleDelete=id=>{dispatch(deleteUser(id));};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h3\",{className:\"mb-3\",children:\"Users\"})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:12,children:[loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Avatar\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Is Admin\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):users===null||users===void 0?void 0:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Image,{className:\"avatar\",src:user.avatar?user.avatar:`/uploads/user-default.jpg`,alt:\"Avatar\",width:\"40\",height:\"40\",roundedCircle:true})}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?`Yes`:`No`}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:`/admin/users/${user._id}/edit`,children:/*#__PURE__*/_jsx(Button,{children:\"Edit\"})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>handleDelete(user._id),children:\"Delete\"})]})]},user._id))})]})]})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{md:12,children:count!==0&&/*#__PURE__*/_jsx(Paginate,{currentPage:currentPage,setCurrentPage:setCurrentPage,totalPosts:count,postPerPage:4})})})]});};export default AdminUsersScreen;","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Table","Button","Image","LinkContainer","useDispatch","useSelector","Message","Loader","Paginate","deleteUser","fetchUsers","jsx","_jsx","jsxs","_jsxs","AdminUsersScreen","currentPage","setCurrentPage","dispatch","loading","users","count","error","state","usersFetch","loadingDelete","success","successDelete","errorDelete","userDelete","handleDelete","id","children","className","md","variant","striped","bordered","hover","size","map","user","_id","src","avatar","alt","width","height","roundedCircle","name","email","isAdmin","to","onClick","totalPosts","postPerPage"],"sources":["D:/NAM3/DACN/hotel-booking-main/frontend/src/screens/AdminUsersScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Table, Button, Image } from 'react-bootstrap';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { RootStateOrAny, useDispatch, useSelector } from 'react-redux';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport Paginate from '../components/Paginate';\nimport { deleteUser, fetchUsers } from '../redux/actions/UserActions';\nimport { IUser } from '../interfaces/IUser';\n\nconst AdminUsersScreen = () => {\n    const [currentPage, setCurrentPage] = useState<number>(1);\n    const dispatch = useDispatch();\n\n    const { loading, users, count, error } = useSelector((state: RootStateOrAny) => state.usersFetch);\n    const { loading: loadingDelete, success: successDelete, error: errorDelete } = useSelector((state: RootStateOrAny) => state.userDelete);\n\n    useEffect(() => {\n        dispatch(fetchUsers(currentPage));\n    }, [dispatch, currentPage, successDelete]);\n\n    const handleDelete = (id: IUser['_id']) => {\n        dispatch(deleteUser(id));\n    }\n\n    return (\n        <Container>\n            <Row>\n                <Col>\n                    <h3 className='mb-3'>Users</h3>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={12}>\n                    {/* Show loader or error when deleting */}\n                    {loadingDelete && <Loader />}\n                    {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n\n                    <Table striped bordered hover size=\"sm\">\n                        <thead>\n                            <tr>\n                                <th>User ID</th>\n                                <th>Avatar</th>\n                                <th>Name</th>\n                                <th>Email</th>\n                                <th>Is Admin</th>\n                                <th>Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {loading ? <Loader /> : error ? <Message variant=\"danger\">{error}</Message> : (\n                                users?.map((user: IUser) =>\n                                    <tr key={user._id}>\n                                        <td>{user._id}</td>\n                                        <td>\n                                            <Image\n                                                className=\"avatar\"\n                                                src={user.avatar ? user.avatar : `/uploads/user-default.jpg`}\n                                                alt=\"Avatar\"\n                                                width=\"40\"\n                                                height=\"40\"\n                                                roundedCircle\n                                            />\n                                        </td>\n                                        <td>{user.name}</td>\n                                        <td>{user.email}</td>\n                                        <td>{user.isAdmin ? `Yes` : `No`}</td>\n                                        <td>\n                                            <LinkContainer to={`/admin/users/${user._id}/edit`}>\n                                                <Button>\n                                                    Edit\n                                                </Button>\n                                            </LinkContainer>\n                                            <Button variant=\"danger\" onClick={() => handleDelete(user._id)}>\n                                                Delete\n                                            </Button>\n                                        </td>\n                                    </tr>\n                                )\n                            )}\n                        </tbody>\n                    </Table>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={12}>\n                    {count !== 0 && (\n                        <Paginate\n                            currentPage={currentPage}\n                            setCurrentPage={setCurrentPage}\n                            totalPosts={count}\n                            postPerPage={4}\n                        />\n                    )}\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\nexport default AdminUsersScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}